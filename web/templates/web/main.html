{% load notes %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Заметки</title>
</head>
<body>
    <h1>Заметки</h1>
    <hr>
    <h2>Список заметок</h2>
    <p>
        Количество заметок: {{ count }}.
        Выводить
        {% filter_link "все заметки" "" query_params %} |
        {% filter_link "c напоминаниями" "with_alerts" query_params %}
    </p>

    <form action="https://google.com/search" method="get">
        <input type="text" name="q" placeholder="Поиск...">
        <button>Найти в Google</button>
    </form>

    <br>

    <form action="" method="get">
        <input type="text" name="search" placeholder="Поиск..."
               value="{{ search|default_if_none:'' }}">
        <button>Найти</button>
    </form>

    <ul>
        {% for note in notes %}
            <li>
                <b>{{ note.title }}</b> <small>#{{ note.id }}</small>
                {% if note.alert_send_at %}
                    – напомнить в {{ note.alert_send_at|date:"d.m.Y H:i" }}
                {% endif %}
                <small>{{ note.text|slice:":15" }}...</small>
            </li>
        {% endfor %}
    </ul>

</body>
</html>
